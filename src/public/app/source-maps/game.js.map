{"version":3,"sources":["module.ts","index-controller.ts","models/tile.ts","models/cookie.ts","models/level.ts","models/swap.ts","models/config.ts","states/boot.ts","states/preloader.ts","states/game-play.ts","states/game-end.ts","main.ts","game-helpers.ts","_references.ts","game-directive.ts"],"names":["GameApp","GameApp.IndexController","GameApp.IndexController.constructor","GameApp.Models","GameApp.Models.Tile","GameApp.Models.Tile.constructor","GameApp.Models.Tile.tileAtColumn","GameApp.Models.CookieType","GameApp.Models.Cookie","GameApp.Models.Cookie.constructor","GameApp.Models.Cookie.spriteName","GameApp.Models.Cookie.highlightedSpriteName","GameApp.Models.Level","GameApp.Models.Level.constructor","GameApp.Models.Level.shuffle","GameApp.Models.Level.hasChainAtColumn","GameApp.Models.Level.detectPossibleSwaps","GameApp.Models.Level.createInitialCookies","GameApp.Models.Level.calculateCookieType","GameApp.Models.Level.whereIsAlreadyTwoCookies","GameApp.Models.Level.cookieAtColumn","GameApp.Models.Level.createCookieAtColumn","GameApp.Models.Level.createCookiesArray","GameApp.Models.Level.createTilesArray","GameApp.Models.Level.tileAtColumn","GameApp.Models.Level.initWithLevel","GameApp.Models.Level.performSwap","GameApp.Models.Swap","GameApp.Models.Swap.constructor","GameApp.Models.Config","GameApp.Models.Config.constructor","GameApp.States","GameApp.States.Boot","GameApp.States.Boot.constructor","GameApp.States.Boot.preload","GameApp.States.Boot.create","GameApp.States.Preloader","GameApp.States.Preloader.constructor","GameApp.States.Preloader.preload","GameApp.States.Preloader.create","GameApp.States.GamePlay","GameApp.States.GamePlay.constructor","GameApp.States.GamePlay.initLevel","GameApp.States.GamePlay.create","GameApp.States.GamePlay.beginGame","GameApp.States.GamePlay.shuffle","GameApp.States.GamePlay.addSpritesForCookies","GameApp.States.GamePlay.pointForColum","GameApp.States.GamePlay.convertPoint","GameApp.States.GamePlay.addTiles","GameApp.States.GamePlay.touchesMoved","GameApp.States.GamePlay.touchesBegan","GameApp.States.GamePlay.touchesEnd","GameApp.States.GamePlay.trySwapHorizontal","GameApp.States.GamePlay.animateSwap","GameApp.States.GameEnd","GameApp.States.GameEnd.constructor","GameApp.States.GameEnd.create","CandyGame","CandyGame.constructor","CandyGame.create","GameApp.GameHelpers","GameApp.GameHelpers.constructor","GameApp.GameHelpers.getRandomNumber","GameApp.GameDirective"],"mappings":"AAAA,mEAAmE;AAEnE,IAAO,OAAO,CAIb;AAJD,WAAO,OAAO,EAAC,CAAC;IACfA,YAAYA,CAACA;IAEbA,OAAOA,CAACA,MAAMA,CAACA,SAASA,EAACA,EAAEA,CAACA,CAACA;AAC9BA,CAACA,EAJM,OAAO,KAAP,OAAO,QAIb;;ACND,uCAAuC;AAEvC,IAAO,OAAO,CAYb;AAZD,WAAO,OAAO,EAAC,CAAC;IACfA,YAAYA,CAACA;IAEXA,IAAaA,eAAeA;QAC7BC,SADcA,eAAeA;QAG7BC,CAACA;QACFD,sBAACA;IAADA,CAJED,IAIDA;IAJcA,uBAAeA,GAAfA,eAIdA,CAAAA;IAEDA,OAAOA,CAACA,MAAMA,CAACA,SAASA,CAACA,CAACA,UAAUA,CAACA,iBAAiBA,EAAEA,eAAeA,CAACA,CAAAA;AAGzEA,CAACA,EAZM,OAAO,KAAP,OAAO,QAYb;;ACdD,0CAA0C;AAE1C,IAAO,OAAO,CAab;AAbD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAapBA;IAbcA,WAAAA,MAAMA,EAACA,CAACA;QACtBG,YAAYA,CAACA;QAMZA,IAAaA,IAAIA;YAAjBC,SAAaA,IAAIA;YAKjBC,CAACA;YAHAD,2BAAYA,GAAZA,UAAaA,MAAcA,EAAEA,GAAWA;gBACvCE,MAAMA,CAACA,IAAIA,CAACA;YACbA,CAACA;YACFF,WAACA;QAADA,CALAD,IAKCA;QALYA,WAAIA,GAAJA,IAKZA,CAAAA;IACHA,CAACA,EAbcH,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAapBA;AAADA,CAACA,EAbM,OAAO,KAAP,OAAO,QAab;;ACfD,0CAA0C;AAE1C,IAAO,OAAO,CAsEb;AAtED,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAsEpBA;IAtEcA,WAAAA,MAAMA,EAACA,CAACA;QACtBG,YAAYA,CAACA;QAmBbA,WAAYA,UAAUA;YACrBI,qCAAYA,CAACA,eAAAA;YACZA,mCAAUA,CAACA,aAAAA;YACXA,kCAASA,CAACA,YAAAA;YACVA,iCAAQA,CAACA,WAAAA;YACTA,oCAAWA,CAACA,cAAAA;YACZA,uCAAcA,CAACA,iBAAAA;QACjBA,CAACA,EAPWJ,iBAAUA,KAAVA,iBAAUA,QAOrBA;QAPDA,IAAYA,UAAUA,GAAVA,iBAOXA,CAAAA;QAEDA,IAAaA,MAAMA;YAMlBK,SANYA,MAAMA,CAMNA,MAAcA,EAACA,GAAWA,EAACA,UAAkBA;gBAMvDC,gBAAWA,GAAkBA;oBAC9BA,WAAWA;oBACXA,SAASA;oBACTA,QAAQA;oBACRA,OAAOA;oBACPA,UAAUA;oBACVA,aAAaA;iBACbA,CAAAA;gBAEEA,2BAAsBA,GAAkBA;oBAC1CA,uBAAuBA;oBACvBA,qBAAqBA;oBACrBA,oBAAoBA;oBACpBA,mBAAmBA;oBACnBA,sBAAsBA;oBACtBA,yBAAyBA;iBACzBA,CAAAA;gBArBAA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;gBACrBA,IAAIA,CAACA,GAAGA,GAAGA,GAAGA,CAACA;gBACfA,IAAIA,CAACA,UAAUA,GAAGA,UAAUA,CAACA;YAC9BA,CAACA;YAqBDD,2BAAUA,GAAVA;gBACCE,MAAMA,CAACA,IAAIA,CAACA,WAAWA,CAACA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;YAC9CA,CAACA;YACDF,sCAAqBA,GAArBA;gBACOG,MAAMA,CAACA,IAAIA,CAACA,sBAAsBA,CAACA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;YAC/DA,CAACA;YAIFH,aAACA;QAADA,CAxCAL,IAwCCA;QAxCYA,aAAMA,GAANA,MAwCZA,CAAAA;IACFA,CAACA,EAtEcH,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAsEpBA;AAADA,CAACA,EAtEM,OAAO,KAAP,OAAO,QAsEb;;ACxED,0CAA0C;AAE1C,IAAO,OAAO,CAqOb;AArOD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAqOpBA;IArOcA,WAAAA,MAAMA,EAACA,CAACA;QACtBG,YAAYA,CAACA;QAQbA,IAAaA,KAAKA;YAQjBS,SARYA,KAAKA;gBACjBC,eAAUA,GAAWA,aAAMA,CAACA,UAAUA,CAACA;gBACvCA,YAAOA,GAAWA,aAAMA,CAACA,UAAUA,CAACA;gBAOnCA,IAAIA,CAACA,kBAAkBA,EAAEA,CAACA;YAC3BA,CAACA;YAEDD,uBAAOA,GAAPA;gBACCE,IAAIA,GAAaA,CAACA;gBAElBA,GAAGA,CAACA;oBACHA,GAAGA,GAAGA,IAAIA,CAACA,oBAAoBA,EAAEA,CAACA;oBAClCA,IAAIA,CAACA,mBAAmBA,EAAEA,CAACA;gBAC5BA,CAACA,QACMA,IAAIA,CAACA,aAAaA,CAACA,MAAMA,IAAIA,CAACA,EAACA;gBAC5BA,OAAOA,CAACA,GAAGA,CAACA,IAAIA,CAACA,aAAaA,CAACA,CAACA;gBAC1CA,MAAMA,CAACA,GAAGA,CAACA;YACZA,CAACA;YAEOF,gCAAgBA,GAAxBA,UAAyBA,MAAcA,EAAEA,GAAWA;gBAEnDG,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,EAClCA,UAAsBA,CAACA;gBAE3BA,EAAEA,CAAAA,CAACA,MAAMA,CAACA,CAACA,CAACA;oBACXA,UAAUA,GAAGA,MAAMA,CAACA,UAAUA,CAACA;gBAChCA,CAACA;gBACDA,IAAIA,CAAAA,CAACA;oBACJA,UAAUA,GAAGA,CAACA,CAACA;gBAChBA,CAACA;gBAEDA,IAAIA,UAAUA,GAAGA,CAACA,CAACA;gBACnBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,MAAMA,GAAGA,CAACA,EAAEA,CAACA,IAAIA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,EAAEA,CAACA,EAAEA,EAAGA,UAAUA,EAAEA;oBAACA,CAACA;gBAC9HA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,MAAMA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,UAAUA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,EAAEA,CAACA,EAAEA,EAAGA,UAAUA,EAAEA;oBAACA,CAACA;gBAC3IA,EAAEA,CAACA,CAACA,UAAUA,IAAIA,CAACA,CAACA;oBAACA,MAAMA,CAACA,IAAIA,CAACA;gBAEjCA,IAAIA,UAAUA,GAAGA,CAACA,CAACA;gBACnBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,GAAGA,GAAGA,CAACA,EAAEA,CAACA,IAAIA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,EAAEA,CAACA,EAAEA,EAAGA,UAAUA,EAAEA;oBAACA,CAACA;gBACjIA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,GAAGA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,OAAOA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,IAAIA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,EAAEA,CAACA,EAAEA,EAAGA,UAAUA,EAAEA;oBAACA,CAACA;gBAC3IA,MAAMA,CAACA,CAACA,UAAUA,IAAIA,CAACA,CAACA,CAACA;YAC1BA,CAACA;YAEOH,mCAAmBA,GAA3BA;gBACCI,IAAIA,aAAaA,GAAWA,EAAEA,CAACA;gBAE/BA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,GAAGA,CAACA,EAAEA,GAAGA,GAAGA,UAAUA,CAACA,OAAOA,EAAEA,GAAGA,EAAEA,EAAEA,CAACA;oBACnDA,GAAGA,CAACA,CAACA,GAAGA,CAACA,MAAMA,GAAGA,CAACA,EAAEA,MAAMA,GAAGA,UAAUA,CAACA,UAAUA,EAAEA,MAAMA,EAAEA,EAAEA,CAACA;wBAE/DA,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,CAACA;wBACvCA,EAAEA,CAACA,CAACA,MAAMA,CAACA,CAACA,CAACA;4BAEZA,gEAAgEA;4BAChEA,EAAEA,CAACA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA,CAACA;gCAClCA,uEAAuEA;oCACnEA,KAAKA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA;gCAC1CA,EAAEA,CAACA,CAACA,KAAKA,CAACA,CAACA,CAACA;oCACXA,YAAYA;oCACZA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,KAAKA,CAACA;oCAClCA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,GAAGA,MAAMA,CAACA;oCAEvCA,wCAAwCA;oCACxCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,MAAMA,GAAGA,CAACA,EAAEA,GAAGA,CAACA,IACxCA,IAAIA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;wCAEtCA,IAAIA,IAAIA,GAAGA,IAAIA,WAAIA,EAAEA,CAACA;wCACtBA,IAAIA,CAACA,OAAOA,GAAGA,MAAMA,CAACA;wCACtBA,IAAIA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;wCACrBA,aAAaA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oCAC1BA,CAACA;oCAEDA,iBAAiBA;oCACjBA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,MAAMA,CAACA;oCACnCA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,GAAGA,KAAKA,CAACA;gCACvCA,CAACA;4BACFA,CAACA;4BAEDA,EAAEA,CAACA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,OAAOA,GAAGA,CAACA,CAACA,CAACA,CAACA;gCAE5BA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,CAACA;gCAC1CA,EAAEA,CAACA,CAACA,KAAKA,CAACA,CAACA,CAACA;oCACXA,YAAYA;oCACZA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,KAAKA,CAACA;oCAClCA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,GAAGA,MAAMA,CAACA;oCAEvCA,EAAEA,CAACA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA,GAAGA,GAAGA,CAACA,CAACA,IACxCA,IAAIA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA;wCAEtCA,IAAIA,IAAIA,GAAGA,IAAIA,WAAIA,EAAEA,CAACA;wCACtBA,IAAIA,CAACA,OAAOA,GAAGA,MAAMA,CAACA;wCACtBA,IAAIA,CAACA,OAAOA,GAAGA,KAAKA,CAACA;wCACrBA,aAAaA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oCAC1BA,CAACA;oCAEDA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,MAAMA,CAACA;oCACnCA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,GAAGA,KAAKA,CAACA;gCACvCA,CAACA;4BACFA,CAACA;wBACFA,CAACA;oBACFA,CAACA;gBACFA,CAACA;gBAEDA,IAAIA,CAACA,aAAaA,GAAGA,aAAaA,CAACA;YACpCA,CAACA;YAEDJ,oCAAoBA,GAApBA;gBACCK,IAAIA,KAAKA,GAAaA,EAAEA,CAACA;gBACzBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,GAAWA,CAACA,EAAEA,GAAGA,GAAGA,IAAIA,CAACA,OAAOA,EAAEA,GAAGA,EAAEA,EAAEA,CAACA;oBACrDA,GAAGA,CAACA,CAACA,GAAGA,CAACA,MAAMA,GAAWA,CAACA,EAAEA,MAAMA,GAAGA,IAAIA,CAACA,UAAUA,EAAEA,MAAMA,EAAEA,EAAEA,CAACA;wBAEjEA,EAAEA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,IAAIA,IAAIA,CAACA,CAACA,CAACA;4BACrCA,IAAIA,UAAUA,GAAeA,IAAIA,CAACA,mBAAmBA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,CAACA;4BACnEA,IAAIA,MAAMA,GAAWA,IAAIA,CAACA,oBAAoBA,CAACA,MAAMA,EAAEA,GAAGA,EAAEA,UAAUA,CAACA,CAACA;4BAElEA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,MAAMA,CAACA;4BACzCA,KAAKA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA;wBACpBA,CAACA;wBACDA,IAAIA,CAAAA,CAACA;4BACJA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,IAAIA,CAACA;wBAClCA,CAACA;oBAEFA,CAACA;gBACFA,CAACA;gBAEDA,MAAMA,CAACA,KAAKA,CAACA;YACdA,CAACA;YAEOL,mCAAmBA,GAA3BA,UAA4BA,MAAcA,EAAEA,GAAWA;gBACtDM,IAAIA,UAAsBA,CAACA;gBAE3BA,GAAGA,CAACA;oBACHA,UAAUA,GAAGA,mBAAWA,CAACA,eAAeA,CAACA,aAAMA,CAACA,cAAcA,CAACA,CAACA;gBACjEA,CAACA,QACMA,IAAIA,CAACA,wBAAwBA,CAACA,MAAMA,EAAEA,GAAGA,EAAEA,UAAUA,CAACA,EAACA;gBAE9DA,MAAMA,CAACA,UAAUA,CAACA;YACnBA,CAACA;YAEON,wCAAwBA,GAAhCA,UAAiCA,MAAcA,EAAEA,GAAWA,EAAEA,UAAsBA;gBAEnFO,MAAMA,CAACA,CAACA,MAAMA,IAAIA,CAACA,IAClBA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,IAC7BA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,IAC7BA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,IACtDA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,CAACA,IAEvDA,CAACA,GAAGA,IAAIA,CAACA,IACRA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,IAC7BA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,IAC7BA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,IACtDA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,CAACA,UAAUA,IAAIA,UAAUA,CAACA,CAAAA;YAC1DA,CAACA;YAEDP,8BAAcA,GAAdA,UAAeA,MAAcA,EAAEA,GAAWA;gBACzCQ,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,CAAAA;YACjCA,CAACA;YAEOR,oCAAoBA,GAA5BA,UAA6BA,MAAcA,EAAEA,GAAWA,EAAEA,UAAsBA;gBAE/ES,IAAIA,MAAMA,GAAGA,IAAIA,aAAMA,CAACA,MAAMA,EAAEA,GAAGA,EAAEA,UAAUA,CAACA,CAACA;gBAEjDA,MAAMA,CAACA,MAAMA,CAACA;YACfA,CAACA;YAEOT,kCAAkBA,GAA1BA;gBACCU,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,KAAKA,CAACA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;gBAC9CA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,UAAUA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;oBAC1CA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA,GAAGA,IAAIA,KAAKA,CAACA,IAAIA,CAACA,OAAOA,GAAGA,CAACA,CAACA,CAACA;gBAC/CA,CAACA;YACFA,CAACA;YAEOV,gCAAgBA,GAAxBA;gBACCW,IAAIA,CAACA,KAAKA,GAAGA,IAAIA,KAAKA,CAACA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;gBAC5CA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,UAAUA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;oBAC1CA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,IAAIA,KAAKA,CAACA,IAAIA,CAACA,OAAOA,GAAGA,CAACA,CAACA,CAACA;gBAC7CA,CAACA;YACFA,CAACA;YAEDX,4BAAYA,GAAZA,UAAaA,MAAcA,EAAEA,GAAWA;gBACvCY,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,CAAAA;YAC/BA,CAACA;YAEDZ,6BAAaA,GAAbA,UAAcA,KAAiBA;gBAC9Ba,IAAIA,CAACA,gBAAgBA,EAAEA,CAACA;gBAExBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,GAAWA,CAACA,EAAEA,GAAGA,GAAGA,IAAIA,CAACA,OAAOA,EAAEA,GAAGA,EAAEA,EAAEA,CAACA;oBACrDA,GAAGA,CAACA,CAACA,GAAGA,CAACA,MAAMA,GAAWA,CAACA,EAAEA,MAAMA,GAAGA,IAAIA,CAACA,UAAUA,EAAEA,MAAMA,EAAEA,EAAEA,CAACA;wBACjEA,IAAIA,IAAIA,GAAGA,KAAKA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,CAACA;wBAEpCA,EAAEA,CAACA,CAACA,IAAIA,IAAIA,CAACA,CAACA,CAACA,CAACA;4BACfA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,IAAIA,WAAIA,EAAEA,CAACA;wBACtCA,CAACA;wBACDA,IAAIA,CAACA,CAACA;4BACLA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,IAAIA,CAACA;wBAChCA,CAACA;oBACFA,CAACA;gBACFA,CAACA;YACFA,CAACA;YAEDb,2BAAWA,GAAXA,UAAYA,IAAUA;gBACrBc,IAAIA,OAAOA,GAAWA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EACxCA,IAAIA,GAAWA,IAAIA,CAACA,OAAOA,CAACA,GAAGA,EAC/BA,OAAOA,GAAWA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EACrCA,IAAIA,GAAWA,IAAIA,CAACA,OAAOA,CAACA,GAAGA,CAACA;gBAEjCA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAACA,CAACA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,OAAOA,CAACA;gBAC3CA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,OAAOA,CAACA;gBAC9BA,IAAIA,CAACA,OAAOA,CAACA,GAAGA,GAAGA,IAAIA,CAACA;gBAExBA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAACA,CAACA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,OAAOA,CAACA;gBAC3CA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,OAAOA,CAACA;gBAC9BA,IAAIA,CAACA,OAAOA,CAACA,GAAGA,GAAGA,IAAIA,CAACA;YAEzBA,CAACA;YAEFd,YAACA;QAADA,CA3NAT,IA2NCA;QA3NYA,YAAKA,GAALA,KA2NZA,CAAAA;IACFA,CAACA,EArOcH,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAqOpBA;AAADA,CAACA,EArOM,OAAO,KAAP,OAAO,QAqOb;;ACvOD,0CAA0C;AAE1C,IAAO,OAAO,CAUb;AAVD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAUpBA;IAVcA,WAAAA,MAAMA,EAACA,CAACA;QACtBG,YAAYA,CAACA;QAGZA,IAAaA,IAAIA;YAAjBwB,SAAaA,IAAIA;YAKjBC,CAACA;YAADD,WAACA;QAADA,CALAxB,IAKCA;QALYA,WAAIA,GAAJA,IAKZA,CAAAA;IACHA,CAACA,EAVcH,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAUpBA;AAADA,CAACA,EAVM,OAAO,KAAP,OAAO,QAUb;;ACZD,0CAA0C;AAE1C,IAAO,OAAO,CAQb;AARD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAQpBA;IARcA,WAAAA,MAAMA,EAACA,CAACA;QACtBG,YAAYA,CAACA;QAEXA,IAAaA,MAAMA;YAAnB0B,SAAaA,MAAMA;YAIrBC,CAACA;YAHOD,iBAAUA,GAAWA,CAACA,CAACA;YACvBA,cAAOA,GAAWA,CAACA,CAACA;YACpBA,qBAAcA,GAAGA,CAACA,CAACA;YAC3BA,aAACA;QAADA,CAJE1B,IAIDA;QAJcA,aAAMA,GAANA,MAIdA,CAAAA;IACFA,CAACA,EARcH,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAQpBA;AAADA,CAACA,EARM,OAAO,KAAP,OAAO,QAQb;;ACVD,0CAA0C;;;;;;;AAE1C,IAAO,OAAO,CA8Bb;AA9BD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CA8BpBA;IA9BcA,WAAAA,MAAMA,EAACA,CAACA;QACtB+B,YAAYA,CAACA;QAEXA,IAAaA,IAAIA;YAASC,UAAbA,IAAIA,UAAqBA;YAAtCA,SAAaA,IAAIA;gBAASC,8BAAYA;YA0BrCA,CAACA;YAxBGD,sBAAOA,GAAPA;YAEAE,CAACA;YAEDF,qBAAMA,GAANA;gBAEIG,0FAA0FA;gBAC1FA,IAAIA,CAACA,KAAKA,CAACA,WAAWA,GAAGA,CAACA,CAACA;gBAE3BA,6GAA6GA;gBAC7GA,IAAIA,CAACA,KAAKA,CAACA,uBAAuBA,GAAGA,IAAIA,CAACA;gBAE1CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,CAACA,CAACA;gBAG/BA,CAACA;gBACDA,IAAIA,CAACA,CAACA;gBAENA,CAACA;gBAEDA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,WAAWA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,CAACA;YAEpDA,CAACA;YAELH,WAACA;QAADA,CA1BDD,EAA0BA,MAAMA,CAACA,KAAKA,EA0BpCA;QA1BWA,WAAIA,GAAJA,IA0BXA,CAAAA;IACLA,CAACA,EA9Bc/B,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QA8BpBA;AAADA,CAACA,EA9BM,OAAO,KAAP,OAAO,QA8Bb;;AChCD,0CAA0C;;;;;;;AAE1C,IAAO,OAAO,CA+Cb;AA/CD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CA+CpBA;IA/CcA,WAAAA,MAAMA,EAACA,CAACA;QACpB+B,YAAYA,CAACA;QAEbA,IAAaA,SAASA;YAASK,UAAlBA,SAASA,UAAqBA;YAA3CA,SAAaA,SAASA;gBAASC,8BAAYA;YA2C3CA,CAACA;YAzCED,2BAAOA,GAAPA;gBAEGE,IAAIA,MAAMA,GAAGA,kBAAkBA,CAACA;gBAEhCA,IAAIA,IAAIA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,YAAYA,EAAEA;oBAC1FA,IAAIA,EAAEA,YAAYA;oBAClBA,IAAIA,EAAEA,SAASA;oBACfA,KAAKA,EAAEA,QAAQA;iBAClBA,CAACA,CAACA;gBAEHA,IAAIA,CAACA,MAAMA,CAACA,GAAGA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,CAACA;gBAE1BA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,EAAEA,MAAMA,GAACA,UAAUA,CAACA,CAACA;gBAChDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,MAAMA,GAACA,mBAAmBA,CAACA,CAACA;gBACvDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,WAAWA,CAACA,MAAMA,EAAEA,MAAMA,GAACA,kBAAkBA,EAAEA,EAAEA,EAAEA,EAAEA,CAACA,CAACA;gBAEtEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,WAAWA,EAAEA,MAAMA,GAACA,kBAAkBA,CAACA,CAACA;gBAC7DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,SAASA,EAAEA,MAAMA,GAACA,gBAAgBA,CAACA,CAACA;gBACzDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,EAAEA,MAAMA,GAACA,eAAeA,CAACA,CAACA;gBACvDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,MAAMA,GAACA,cAAcA,CAACA,CAACA;gBACrDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,EAAEA,MAAMA,GAACA,iBAAiBA,CAACA,CAACA;gBAC3DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,aAAaA,EAAEA,MAAMA,GAACA,oBAAoBA,CAACA,CAACA;gBAEjEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,EAAEA,MAAMA,GAACA,aAAaA,CAACA,CAACA;gBAEnDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,QAAQA,EAACA,8BAA8BA,CAACA,CAACA;gBAC7DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,QAAQA,EAACA,8BAA8BA,CAACA,CAACA;gBAC7DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,QAAQA,EAACA,8BAA8BA,CAACA,CAACA;gBAC7DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,QAAQA,EAACA,8BAA8BA,CAACA,CAACA;gBAC7DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,QAAQA,EAACA,8BAA8BA,CAACA,CAACA;YAEhEA,CAACA;YAEDF,0BAAMA,GAANA;gBAGGG,sGAAsGA;gBACvGA,kDAAkDA;gBACjDA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,UAAUA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,CAACA;YAClDA,CAACA;YAEJH,gBAACA;QAADA,CA3CAL,EAA+BA,MAAMA,CAACA,KAAKA,EA2C1CA;QA3CYA,gBAASA,GAATA,SA2CZA,CAAAA;IACJA,CAACA,EA/Cc/B,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QA+CpBA;AAADA,CAACA,EA/CM,OAAO,KAAP,OAAO,QA+Cb;;ACjDD,0CAA0C;;;;;;;AAE1C,IAAO,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC;AACpC,IAAO,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;AACpC,IAAO,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;AAE/B,IAAO,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;AACnC,IAAO,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;AAE1C,IAAO,OAAO,CA+Lb;AA/LD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CA+LpBA;IA/LcA,WAAAA,MAAMA,EAACA,CAACA;QACpB+B,YAAYA,CAACA;QAEbA,IAAaA,QAAQA;YAASS,UAAjBA,QAAQA,UAAqBA;YAA1CA,SAAaA,QAAQA;gBAASC,8BAAYA;gBAEvCA,cAASA,GAAWA,IAAIA,CAACA;gBACzBA,eAAUA,GAAWA,IAAIA,CAACA;YAwL7BA,CAACA;YA5KUD,4BAASA,GAAjBA,UAAkBA,SAAiBA;gBAChCE,IAAIA,SAASA,GAAeA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,CAACA,SAASA,CAACA,CAACA;gBAC/DA,IAAIA,CAACA,KAAKA,GAAGA,IAAIA,KAAKA,EAAEA,CAACA;gBACzBA,IAAIA,CAACA,KAAKA,CAACA,aAAaA,CAACA,SAASA,CAACA,CAACA;gBACpCA,IAAIA,CAACA,QAAQA,EAAEA,CAACA;YACnBA,CAACA;YAEDF,yBAAMA,GAANA;gBAEGG,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,CAACA;gBACtFA,EAAEA,CAACA,MAAMA,CAACA,KAAKA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,CAACA;gBAE1BA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,eAAeA,CAACA,IAAIA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,CAACA;gBAEzDA,IAAIA,CAACA,SAASA,CAACA,QAAQA,CAACA,CAACA;gBACzBA,IAAIA,CAACA,SAASA,EAAEA,CAACA;YAEpBA,CAACA;YAEDH,4BAASA,GAATA;gBACGI,IAAIA,CAACA,OAAOA,EAAEA,CAACA;YAClBA,CAACA;YAEDJ,0BAAOA,GAAPA;gBAEGK,IAAIA,OAAOA,GAAaA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,CAACA;gBAC7CA,IAAIA,CAACA,oBAAoBA,CAACA,OAAOA,CAACA,CAACA;YACtCA,CAACA;YAEDL,uCAAoBA,GAApBA,UAAqBA,OAAiBA;gBAAtCM,iBAgBCA;gBAdEA,IAAIA,CAACA,WAAWA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,EAAEA,CAACA;gBACzCA,IAAIA,CAACA,WAAWA,CAACA,CAACA,GAAGA,CAACA,CAACA;gBAEvBA,OAAOA,CAACA,OAAOA,CAACA,UAACA,MAAcA;oBAC5BA,IAAIA,KAAKA,GAAGA,KAAIA,CAACA,aAAaA,CAACA,MAAMA,CAACA,MAAMA,EAAEA,MAAMA,CAACA,GAAGA,CAACA,CAACA;oBAC1DA,IAAIA,aAAaA,GAAGA,KAAIA,CAACA,WAAWA,CAACA,MAAMA,CAACA,KAAKA,CAACA,CAACA,EAAEA,KAAKA,CAACA,CAACA,EAAEA,MAAMA,CAACA,UAAUA,EAAEA,CAACA,CAACA;oBACnFA,aAAaA,CAACA,MAAMA,GAAGA,MAAMA,CAACA,MAAMA,CAACA;oBACrCA,aAAaA,CAACA,GAAGA,GAAGA,MAAMA,CAACA,GAAGA,CAACA;oBAC/BA,aAAaA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;oBAClCA,aAAaA,CAACA,MAAMA,CAACA,WAAWA,CAACA,GAAGA,CAACA,KAAIA,CAACA,YAAYA,EAAEA,KAAIA,CAACA,CAACA;oBAC9DA,aAAaA,CAACA,MAAMA,CAACA,SAASA,CAACA,GAAGA,CAACA,KAAIA,CAACA,UAAUA,EAAEA,KAAIA,CAACA,CAACA;oBAE1DA,MAAMA,CAACA,MAAMA,GAAGA,aAAaA,CAACA;gBACjCA,CAACA,CAACA,CAAAA;YACLA,CAACA;YAEDN,gCAAaA,GAAbA,UAAcA,MAAcA,EAAEA,GAAWA;gBACtCO,MAAMA,CAACA,IAAIA,MAAMA,CAACA,KAAKA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,SAASA,GAAGA,IAAIA,CAACA,SAASA,GAAGA,CAACA,EAAEA,GAAGA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,CAACA;YACtHA,CAACA;YAEDP,+BAAYA,GAAZA,UAAaA,KAAmBA,EAAEA,cAA2CA;gBAE1EQ,EAAEA,CAACA,CAACA,KAAKA,CAACA,CAACA,IAAIA,CAACA,IAAIA,KAAKA,CAACA,CAACA,GAAGA,UAAUA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,SAASA,IACjEA,KAAKA,CAACA,CAACA,IAAIA,CAACA,IAAIA,KAAKA,CAACA,CAACA,GAAGA,UAAUA,CAACA,OAAOA,GAAGA,IAAIA,CAACA,UAAUA,CAACA,CAACA,CAACA;oBAEjEA,cAAcA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,CAACA;oBAC7DA,cAAcA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAACA,GAAGA,IAAIA,CAACA,UAAUA,CAACA,CAACA;oBAE3DA,MAAMA,CAACA,IAAIA,CAACA;gBACfA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACHA,MAAMA,CAACA,KAAKA,CAACA;gBAChBA,CAACA;YAEJA,CAACA;YAEDR,2BAAQA,GAARA;gBACGS,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,EAAEA,CAACA;gBACxCA,IAAIA,CAACA,UAAUA,CAACA,CAACA,GAAGA,CAACA,CAACA;gBAEtBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,GAAWA,CAACA,EAAEA,GAAGA,GAAGA,WAAWA,CAACA,MAAMA,CAACA,UAAUA,EAAEA,GAAGA,EAAEA,EAAEA,CAACA;oBACpEA,GAAGA,CAACA,CAACA,GAAGA,CAACA,MAAMA,GAAWA,CAACA,EAAEA,MAAMA,GAAGA,WAAWA,CAACA,MAAMA,CAACA,UAAUA,EAAEA,MAAMA,EAAEA,EAAEA,CAACA;wBAC7EA,EAAEA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,IAAIA,IAAIA,CAACA,CAACA,CAACA;4BAChDA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,aAAaA,CAACA,MAAMA,EAAEA,GAAGA,CAACA,CAACA;4BAC5CA,IAAIA,CAACA,UAAUA,CAACA,MAAMA,CAACA,KAAKA,CAACA,CAACA,EAAEA,KAAKA,CAACA,CAACA,EAAEA,MAAMA,CAACA,CAACA;wBACpDA,CAACA;oBACJA,CAACA;gBACJA,CAACA;YACJA,CAACA;YAEDT,+BAAYA,GAAZA,UAAaA,OAAOA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,SAASA;gBAElCU,EAAEA,CAAAA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA;oBAACA,MAAMA,CAACA;gBAEjCA,EAAEA,CAACA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,CAACA;oBAElBA,IAAIA,cAAcA,GAAgCA;wBAC/CA,MAAMA,EAAEA,IAAIA;wBACZA,GAAGA,EAAEA,IAAIA;qBACXA,CAAAA;oBAEDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,IAAIA,MAAMA,CAACA,KAAKA,CAACA,CAACA,EAAEA,CAACA,CAACA,EAAEA,cAAcA,CAACA,CAACA,CAACA,CAACA;wBAE7DA,IAAIA,SAASA,GAAWA,CAACA,EACtBA,SAASA,GAAWA,CAACA,CAACA;wBAEzBA,EAAEA,CAACA,CAACA,cAAcA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,eAAeA,CAACA,CAACA,CAACA;4BAChDA,SAASA,GAAGA,CAACA,CAACA,CAACA;wBAClBA,CAACA;wBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,cAAcA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,eAAeA,CAACA,CAACA,CAACA;4BACvDA,SAASA,GAAGA,CAACA,CAACA;wBACjBA,CAACA;wBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,cAAcA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA;4BACjDA,SAASA,GAAGA,CAACA,CAACA,CAACA;wBAClBA,CAACA;wBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,cAAcA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA;4BACjDA,SAASA,GAAGA,CAACA,CAACA;wBACjBA,CAACA;wBAEDA,EAAEA,CAACA,CAACA,SAASA,IAAIA,CAACA,IAAIA,SAASA,IAAIA,CAACA,CAACA,CAACA,CAACA;4BACpCA,IAAIA,CAACA,iBAAiBA,CAACA,SAASA,EAAEA,SAASA,CAACA,CAACA;4BAE7CA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,CAACA;wBAC/BA,CAACA;oBAEJA,CAACA;gBAEJA,CAACA;YAEJA,CAACA;YAEDV,+BAAYA,GAAZA,UAAaA,cAAcA,EAAEA,OAAOA;gBAEjCW,EAAEA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,CAACA,cAAcA,CAACA,MAAMA,EAAEA,cAAcA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;oBACxEA,IAAIA,CAACA,eAAeA,GAAGA,cAAcA,CAACA,MAAMA,CAACA;oBAC7CA,IAAIA,CAACA,YAAYA,GAAGA,cAAcA,CAACA,GAAGA,CAACA;oBACvCA,wEAAwEA;oBACxEA,OAAOA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,cAAcA,CAACA,MAAMA,CAACA,CAACA;oBACvDA,OAAOA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,cAAcA,CAACA,GAAGA,CAACA,CAACA;gBACvDA,CAACA;gBACDA,IAAIA,CAAAA,CAACA;oBACFA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,CAACA;oBAC5BA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;gBAC5BA,CAACA;YAEJA,CAACA;YAEDX,6BAAUA,GAAVA,UAAWA,cAAcA;gBACtBY,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,CAACA,YAAYA,GAAGA,IAAIA,CAACA;gBAChDA,+CAA+CA;gBAC/CA,sCAAsCA;YACzCA,CAACA;YAEDZ,oCAAiBA,GAAjBA,UAAkBA,SAAiBA,EAAEA,SAAiBA;gBACnDa,IAAIA,QAAQA,GAAGA,IAAIA,CAACA,eAAeA,GAAGA,SAASA,CAACA;gBAChDA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,YAAYA,GAAGA,SAASA,CAACA;gBAE1CA,EAAEA,CAACA,CAACA,QAAQA,GAAGA,CAACA,IAAIA,QAAQA,IAAIA,UAAUA,CAACA,UAAUA,CAACA;oBAACA,MAAMA,CAACA;gBAC9DA,EAAEA,CAACA,CAACA,KAAKA,GAAGA,CAACA,IAAIA,KAAKA,IAAIA,UAAUA,CAACA,OAAOA,CAACA;oBAACA,MAAMA,CAACA;gBAErDA,IAAIA,QAAQA,GAAWA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,CAACA,QAAQA,EAAEA,KAAKA,CAACA,CAACA;gBAClEA,EAAEA,CAAAA,CAACA,CAACA,QAAQA,CAACA;oBAACA,MAAMA,CAACA;gBAErBA,IAAIA,UAAUA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,CAACA,IAAIA,CAACA,eAAeA,EAAEA,IAAIA,CAACA,YAAYA,CAACA,CAACA;gBAEpFA,IAAIA,IAAIA,GAAGA,IAAIA,IAAIA,EAAEA,CAACA;gBACtBA,IAAIA,CAACA,OAAOA,GAAGA,UAAUA,CAACA;gBAC1BA,IAAIA,CAACA,OAAOA,GAAGA,QAAQA,CAACA;gBAExBA,IAAIA,CAACA,KAAKA,CAACA,WAAWA,CAACA,IAAIA,CAACA,CAACA;gBAC7BA,IAAIA,CAACA,WAAWA,CAACA,IAAIA,CAACA,CAAAA;YAEzBA,CAACA;YAEDb,8BAAWA,GAAXA,UAAYA,IAAUA;gBAEnBc,IAAIA,aAAaA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EACnCA,aAAaA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA;gBAExCA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,CAACA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,EAACA,CAACA,EAAEA,aAAaA,CAACA,QAAQA,CAACA,CAACA,EAAEA,CAACA,EAAEA,aAAaA,CAACA,QAAQA,CAACA,CAACA,EAACA,EAAEA,GAAGA,EAAEA,MAAMA,CAACA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;gBAC9IA,IAAIA,CAACA,IAAIA,CAACA,GAAGA,CAACA,KAAKA,CAACA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,EAACA,CAACA,EAAEA,aAAaA,CAACA,QAAQA,CAACA,CAACA,EAAEA,CAACA,EAAEA,aAAaA,CAACA,QAAQA,CAACA,CAACA,EAACA,EAAEA,GAAGA,EAAEA,MAAMA,CAACA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;YACjJA,CAACA;YAGJd,eAACA;QAADA,CA3LAT,EAA8BA,MAAMA,CAACA,KAAKA,EA2LzCA;QA3LYA,eAAQA,GAARA,QA2LZA,CAAAA;IACJA,CAACA,EA/Lc/B,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QA+LpBA;AAADA,CAACA,EA/LM,OAAO,KAAP,OAAO,QA+Lb;;ACxMD,0CAA0C;;;;;;;AAE1C,IAAO,OAAO,CAUb;AAVD,WAAO,OAAO;IAACA,IAAAA,MAAMA,CAUpBA;IAVcA,WAAAA,MAAMA,EAACA,CAACA;QACtB+B,YAAYA,CAACA;QAEXA,IAAaA,OAAOA;YAASwB,UAAhBA,OAAOA,UAAqBA;YAAzCA,SAAaA,OAAOA;gBAASC,8BAAYA;YAMxCA,CAACA;YAJGD,wBAAMA,GAANA;YAEAE,CAACA;YAELF,cAACA;QAADA,CANDxB,EAA6BA,MAAMA,CAACA,KAAKA,EAMvCA;QANWA,cAAOA,GAAPA,OAMXA,CAAAA;IACLA,CAACA,EAVc/B,MAAMA,GAANA,cAAMA,KAANA,cAAMA,QAUpBA;AAADA,CAACA,EAVM,OAAO,KAAP,OAAO,QAUb;;ACZD,uCAAuC;AAEvC,IAAO,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;AAClC,IAAO,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC;AAC5C,IAAO,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC1C,IAAO,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;AAEzC,IAAM,SAAS;IACZ0D,SADGA,SAASA,CACAA,KAAKA,EAAEA,QAAQA;QACxBC,IAAIA,CAACA,IAAIA,GAAGA,IAAIA,MAAMA,CAACA,IAAIA,CAACA,GAAGA,EAAEA,IAAIA,EAAEA,MAAMA,CAACA,IAAIA,EAAEA,YAAYA,EAAEA;YAC/DA,MAAMA,EAAEA,IAAIA,CAACA,MAAMA;SACrBA,CAACA,CAACA;IAENA,CAACA;IAIDD,0BAAMA,GAANA;QACGE,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,CAACA,MAAMA,EAAEA,IAAIA,CAACA,CAACA;QAClCA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,CAACA,WAAWA,EAAEA,SAASA,CAACA,CAACA;QAC5CA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,CAACA,UAAUA,EAAEA,QAAQA,CAACA,CAACA;QAC1CA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,CAACA,SAASA,EAAEA,OAAOA,CAACA,CAACA;QAExCA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,MAAMA,CAACA,CAACA;IACjCA,CAACA;IAEJF,gBAACA;AAADA,CAnBA,IAmBC;;AC1BD,IAAO,OAAO,CASb;AATD,WAAO,OAAO,EAAA,CAAC;IACd1D,YAAYA,CAACA;IAEbA,IAAaA,WAAWA;QAAxB6D,SAAaA,WAAWA;QAIxBC,CAACA;QAHOD,2BAAeA,GAAtBA,UAAuBA,SAAiBA;YACvCE,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,GAAGA,SAASA,CAACA,GAAGA,CAACA,CAACA,CAACA;QACpDA,CAACA;QACFF,kBAACA;IAADA,CAJA7D,IAICA;IAJYA,mBAAWA,GAAXA,WAIZA,CAAAA;AAEFA,CAACA,EATM,OAAO,KAAP,OAAO,QASb;;ACTD,mEAAmE;AACnE,iEAAiE;AAEjE,kCAAkC;AAClC,4CAA4C;AAG5C,uCAAuC;AACvC,yCAAyC;AACzC,wCAAwC;AACxC,uCAAuC;AACvC,yCAAyC;AAEzC,uCAAuC;AACvC,4CAA4C;AAC5C,4CAA4C;AAC5C,2CAA2C;AAE3C,gCAAgC;AAIhC,wCAAwC;;ACtBxC,uCAAuC;AAEvC,IAAO,OAAO,CAmBb;AAnBD,WAAO,OAAO,EAAC,CAAC;IACfA,YAAYA,CAACA;IAEZA,SAAgBA,aAAaA,CAACA,SAASA;QAEvCgE,IAAIA,MAAMA,GAAGA,UAASA,KAAKA,EAAEA,GAAGA,EAAEA,KAAKA;YACtC,IAAI,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QACjC,CAAC,CAACA;QAEFA,MAAMA,CAACA;YACNA,KAAKA,EAAEA,EAAEA;YACTA,QAAQA,EAAEA,6BAA6BA;YACvCA,IAAIA,EAAEA,MAAMA;SACZA,CAAAA;IACFA,CAACA;IAXgBhE,qBAAaA,GAAbA,aAWhBA,CAAAA;IAEDA,aAAaA,CAACA,OAAOA,GAAGA,CAACA,WAAWA,CAACA,CAAAA;IAErCA,OAAOA,CAACA,MAAMA,CAACA,SAASA,CAACA,CAACA,SAASA,CAACA,eAAeA,EAACA,aAAaA,CAACA,CAAAA;AACnEA,CAACA,EAnBM,OAAO,KAAP,OAAO,QAmBb","file":"game.js","sourcesContent":["/// <reference path='../../../../typings/angularjs/angular.d.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\t\r\n\tangular.module('GameApp',[]);\r\n}","/// <reference path='_references.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\t\r\n   export class IndexController{\r\n\t\tconstructor()\r\n\t\t{\r\n\t\t}\r\n\t}\r\n\t\r\n\tangular.module('GameApp').controller('IndexController', IndexController)\r\n\t\r\n\t\r\n}\r\n\r\n","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n    \r\n\t export interface ITile{\r\n\t\t tileAtColumn (column: number, row: number): Tile;\r\n\t }\r\n\t \r\n\t export class Tile implements ITile{\r\n\t\t \r\n\t\t tileAtColumn(column: number, row: number): Tile{\r\n\t\t\t return null;\r\n\t\t }\r\n\t }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n\r\n\t\r\n\t\r\n\texport interface ICookie{\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t\tcookieType: CookieType;\r\n\t\tsprite: Phaser.Sprite;\r\n\t\t\r\n\t\tspriteName?: () => string;\r\n\t\thighlightedSpriteName?: () => string;\r\n\t}\r\n\t\r\n\texport interface ICookiePosition{\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t}\r\n\t\r\n\texport enum CookieType{\r\n\t\tcroissant = 1,\r\n\t\t\tcupcake = 2,\r\n\t\t\tdanish = 3,\r\n\t\t\tdonut = 4,\r\n\t\t\tmacaroon = 5,\r\n\t\t\tsugarCookie = 6\r\n\t}\r\n\r\n\texport class Cookie {\r\n\t\tcolumn: number;\r\n\t\trow: number;\r\n\t\tcookieType: number;\r\n\t\tsprite: Phaser.Sprite;\r\n\t\t\r\n\t\tconstructor(column: number,row: number,cookieType: number){\r\n\t\t\tthis.column = column;\r\n\t\t\tthis.row = row;\r\n\t\t\tthis.cookieType = cookieType;\r\n\t\t}\r\n\r\n\t   spriteNames: Array<string> = [\r\n\t\t\t\"Croissant\",\r\n\t\t\t\"Cupcake\",\r\n\t\t\t\"Danish\",\r\n\t\t\t\"Donut\",\r\n\t\t\t\"Macaroon\",\r\n\t\t\t\"SugarCookie\"\r\n\t\t]\r\n\r\n\t    highlightedSpriteNames: Array<string> = [\r\n\t\t\t\"Croissant-Highlighted\",\r\n\t\t\t\"Cupcake-Highlighted\",\r\n\t\t\t\"Danish-Highlighted\",\r\n\t\t\t\"Donut-Highlighted\",\r\n\t\t\t\"Macaroon-Highlighted\",\r\n\t\t\t\"SugarCookie-Highlighted\",\r\n\t\t]\r\n\r\n\r\n\t\tspriteName(): string {\r\n\t\t\treturn this.spriteNames[this.cookieType - 1];\r\n\t\t}\r\n\t\thighlightedSpriteName() {\r\n         return this.highlightedSpriteNames[this.cookieType - 1];\r\n\t\t}\r\n\t\t\r\n\t\t//TODO: loging ?\r\n\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n\r\n   export interface IJsonLevel {\r\n\t\ttiles: number[][];\r\n\t\ttargetScore: number;\r\n\t\tmoves: number\r\n\t}\r\n\r\n\texport class Level {\r\n\t\tnumColumns: number = Config.numColumns;\r\n\t\tnumRows: number = Config.numColumns;\r\n\r\n\t\tcookies: Cookie[][];\r\n\t\ttiles: Tile[][];\r\n\t\tpossibleSwaps: Swap[];\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis.createCookiesArray();\r\n\t\t}\r\n\r\n\t\tshuffle(): Array<Cookie> {\r\n\t\t\tvar set: Cookie[];\r\n\r\n\t\t\tdo {\r\n\t\t\t\tset = this.createInitialCookies();\r\n\t\t\t\tthis.detectPossibleSwaps();\r\n\t\t\t}\r\n\t\t\twhile (this.possibleSwaps.length == 0)\r\n         \t\t\t\tconsole.log(this.possibleSwaps);\r\n\t\t\treturn set;\r\n\t\t}\r\n\r\n\t\tprivate hasChainAtColumn(column: number, row: number): boolean {\r\n\t\t\t\r\n\t\t\tvar cookie = this.cookies[column][row],\r\n\t\t\t    cookieType: CookieType;\r\n\t\t\t\t \r\n\t\t\tif(cookie) {\r\n\t\t\t\tcookieType = cookie.cookieType;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tcookieType = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar horzLength = 1;\r\n\t\t\tfor (var i = column - 1; i >= 0 && this.cookies[i][row] && this.cookies[i][row].cookieType == cookieType; i-- , horzLength++);\r\n\t\t\tfor (var i = column + 1; i < this.numColumns && this.cookies[i][row] && this.cookies[i][row].cookieType == cookieType; i++ , horzLength++);\r\n\t\t\tif (horzLength >= 3) return true;\r\n\r\n\t\t\tvar vertLength = 1;\r\n\t\t\tfor (var i = row - 1; i >= 0 && this.cookies[column][i] && this.cookies[column][i].cookieType == cookieType; i-- , vertLength++);\r\n\t\t\tfor (var i = row + 1; i < this.numRows && this.cookies[column][i] && this.cookies[column][i].cookieType == cookieType; i++ , vertLength++);\r\n\t\t\treturn (vertLength >= 3);\r\n\t\t}\r\n\r\n\t\tprivate detectPossibleSwaps() {\r\n\t\t\tvar possibleSwaps: Swap[] = [];\r\n\r\n\t\t\tfor (var row = 0; row < GameConfig.numRows; row++) {\r\n\t\t\t\tfor (var column = 0; column < GameConfig.numColumns; column++) {\r\n\r\n\t\t\t\t\tvar cookie = this.cookies[column][row];\r\n\t\t\t\t\tif (cookie) {\r\n \r\n\t\t\t\t\t\t// Is it possible to swap this cookie with the one on the right?\r\n\t\t\t\t\t\tif (column < this.numColumns - 1) {\r\n\t\t\t\t\t\t\t// Have a cookie in this spot? If there is no tile, there is no cookie.\r\n\t\t\t\t\t\t\tvar other = this.cookies[column + 1][row];\r\n\t\t\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\t\t\t// Swap them\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = other;\r\n\t\t\t\t\t\t\t\tthis.cookies[column + 1][row] = cookie;\r\n \r\n\t\t\t\t\t\t\t\t// Is either cookie now part of a chain?\r\n\t\t\t\t\t\t\t\tif (this.hasChainAtColumn(column + 1, row) ||\r\n\t\t\t\t\t\t\t\t\t this.hasChainAtColumn(column, row)) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar swap = new Swap();\r\n\t\t\t\t\t\t\t\t\tswap.cookieA = cookie;\r\n\t\t\t\t\t\t\t\t\tswap.cookieB = other;\r\n\t\t\t\t\t\t\t\t\tpossibleSwaps.push(swap);\r\n\t\t\t\t\t\t\t\t}\r\n \r\n\t\t\t\t\t\t\t\t// Swap them back\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\t\t\t\t\t\tthis.cookies[column + 1][row] = other;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (row < this.numRows - 1) {\r\n\r\n\t\t\t\t\t\t\tvar other = this.cookies[column][row + 1];\r\n\t\t\t\t\t\t\tif (other) {\r\n\t\t\t\t\t\t\t\t// Swap them\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = other;\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row + 1] = cookie;\r\n\r\n\t\t\t\t\t\t\t\tif (this.hasChainAtColumn(column, row + 1) ||\r\n\t\t\t\t\t\t\t\t\t this.hasChainAtColumn(column, row)) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar swap = new Swap();\r\n\t\t\t\t\t\t\t\t\tswap.cookieA = cookie;\r\n\t\t\t\t\t\t\t\t\tswap.cookieB = other;\r\n\t\t\t\t\t\t\t\t\tpossibleSwaps.push(swap);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row] = cookie;\r\n\t\t\t\t\t\t\t\tthis.cookies[column][row + 1] = other;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.possibleSwaps = possibleSwaps;\r\n\t\t}\r\n\r\n\t\tcreateInitialCookies(): Array<Cookie> {\r\n\t\t\tvar array: Cookie[] = [];\r\n\t\t\tfor (var row: number = 0; row < this.numRows; row++) {\r\n\t\t\t\tfor (var column: number = 0; column < this.numColumns; column++) {\r\n\r\n\t\t\t\t\tif (this.tiles[column][row] != null) {\r\n\t\t\t\t\t\tvar cookieType: CookieType = this.calculateCookieType(column, row);\r\n\t\t\t\t\t\tvar cookie: Cookie = this.createCookieAtColumn(column, row, cookieType);\r\n\t\t\t\t\t\t\r\n\t\t\t         this.cookies[column][row] = cookie;\r\n\t\t\t\t\t\tarray.push(cookie);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.cookies[column][row] = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\t\t}\r\n\r\n\t\tprivate calculateCookieType(column: number, row: number): CookieType {\r\n\t\t\tvar cookieType: CookieType;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tcookieType = GameHelpers.getRandomNumber(Config.numCookieTypes);\r\n\t\t\t}\r\n\t\t\twhile (this.whereIsAlreadyTwoCookies(column, row, cookieType))\r\n\r\n\t\t\treturn cookieType;\r\n\t\t}\r\n\r\n\t\tprivate whereIsAlreadyTwoCookies(column: number, row: number, cookieType: CookieType): boolean {\r\n\r\n\t\t\treturn (column >= 2 &&\r\n\t\t\t\tthis.cookies[column - 1][row] &&\r\n\t\t\t\tthis.cookies[column - 2][row] &&\r\n\t\t\t\tthis.cookies[column - 1][row].cookieType == cookieType &&\r\n\t\t\t\tthis.cookies[column - 2][row].cookieType == cookieType)\r\n\t\t\t\t||\r\n\t\t\t\t(row >= 2 &&\r\n\t\t\t\t\tthis.cookies[column][row - 1] &&\r\n\t\t\t\t\tthis.cookies[column][row - 2] &&\r\n\t\t\t\t\tthis.cookies[column][row - 1].cookieType == cookieType &&\r\n\t\t\t\t\tthis.cookies[column][row - 2].cookieType == cookieType)\r\n\t\t}\r\n\r\n\t\tcookieAtColumn(column: number, row: number) {\r\n\t\t\treturn this.cookies[column][row]\r\n\t\t}\r\n\r\n\t\tprivate createCookieAtColumn(column: number, row: number, cookieType: CookieType): Cookie {\r\n\r\n\t\t\tvar cookie = new Cookie(column, row, cookieType);\r\n\r\n\t\t\treturn cookie;\r\n\t\t}\r\n\r\n\t\tprivate createCookiesArray() {\r\n\t\t\tthis.cookies = new Array(this.numColumns - 1);\r\n\t\t\tfor (var i = 0; i < this.numColumns; i++) {\r\n\t\t\t\tthis.cookies[i] = new Array(this.numRows - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate createTilesArray() {\r\n\t\t\tthis.tiles = new Array(this.numColumns - 1);\r\n\t\t\tfor (var i = 0; i < this.numColumns; i++) {\r\n\t\t\t\tthis.tiles[i] = new Array(this.numRows - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttileAtColumn(column: number, row: number): Tile {\r\n\t\t\treturn this.tiles[column][row]\r\n\t\t}\r\n\r\n\t\tinitWithLevel(level: IJsonLevel) {\r\n\t\t\tthis.createTilesArray();\r\n\r\n\t\t\tfor (var row: number = 0; row < this.numRows; row++) {\r\n\t\t\t\tfor (var column: number = 0; column < this.numColumns; column++) {\r\n\t\t\t\t\tvar tile = level.tiles[column][row];\r\n\r\n\t\t\t\t\tif (tile == 1) {\r\n\t\t\t\t\t\tthis.tiles[column][row] = new Tile();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.tiles[column][row] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tperformSwap(swap: Swap) {\r\n\t\t\tvar columnA: number = swap.cookieA.column,\r\n\t\t\t\trowA: number = swap.cookieA.row,\r\n\t\t\t\tcolumnB: number = swap.cookieB.column,\r\n\t\t\t\trowB: number = swap.cookieB.row;\r\n\r\n\t\t\tthis.cookies[columnA][rowA] = swap.cookieB;\r\n\t\t\tswap.cookieB.column = columnA;\r\n\t\t\tswap.cookieB.row = rowA;\r\n\r\n\t\t\tthis.cookies[columnB][rowB] = swap.cookieA;\r\n\t\t\tswap.cookieA.column = columnB;\r\n\t\t\tswap.cookieA.row = rowB;\r\n\r\n\t\t}\r\n\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict';\r\n    \r\n\t \r\n\t export class Swap{\r\n\t\t \r\n\t\t cookieA: Cookie;\r\n\t\t cookieB: Cookie;\r\n\t\t \r\n\t }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.Models {\r\n\t'use strict'; \r\n\t\r\n   export class Config{\r\n\t\tstatic numColumns: number = 9;\r\n\t\tstatic numRows: number = 9;\r\n\t\tstatic numCookieTypes = 6;\r\n\t}\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n\t'use strict'; \r\n\t\r\n   export class Boot extends Phaser.State {\r\n \r\n        preload() {\r\n \r\n        }\r\n \r\n        create() {\r\n \r\n            //  Unless you specifically need to support multitouch I would recommend setting this to 1\r\n            this.input.maxPointers = 1;\r\n \r\n            //  Phaser will automatically pause if the browser tab the game is in loses focus. You can disable that here:\r\n            this.stage.disableVisibilityChange = true;\r\n \r\n            if (this.game.device.desktop) {\r\n                //  If you have any desktop specific settings, they can go in here\r\n                //this.stage.scale.pageAlignHorizontally = true;\r\n            }\r\n            else {\r\n                //  Same goes for mobile settings.\r\n            }\r\n \r\n            this.game.state.start('Preloader', true, false);\r\n \r\n        }\r\n \r\n    }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n   'use strict';\r\n\r\n   export class Preloader extends Phaser.State {\r\n\r\n      preload() {\r\n         \r\n         var assets = 'app/game/assets/';\r\n         \r\n         var text = this.game.add.text(this.game.world.centerX, this.game.world.centerY, \"Loading...\", {\r\n             font: \"65px Arial\",\r\n             fill: \"#ff0044\",\r\n             align: \"center\"\r\n         });\r\n\r\n         text.anchor.set(0.5, 0.5);\r\n         \r\n         this.game.load.image('logo', assets+'logo.png');\r\n         this.game.load.image('bg', assets+'Background@2x.png');\r\n         this.game.load.spritesheet(\"GEMS\", assets+'diamonds32x5.png', 32, 32);\r\n         \r\n         this.game.load.image('Croissant', assets+'Croissant@2x.png');\r\n         this.game.load.image('Cupcake', assets+'Cupcake@2x.png');\r\n         this.game.load.image('Danish', assets+'Danish@2x.png');\r\n         this.game.load.image('Donut', assets+'Donut@2x.png');\r\n         this.game.load.image('Macaroon', assets+'Macaroon@2x.png');\r\n         this.game.load.image('SugarCookie', assets+'SugarCookie@2x.png');\r\n         \r\n         this.game.load.image('Tile', assets+'Tile@2x.png');\r\n         \r\n         this.game.load.json('level0','app/game/levels/Level_0.json');\r\n         this.game.load.json('level1','app/game/levels/Level_1.json');\r\n         this.game.load.json('level2','app/game/levels/Level_2.json');\r\n         this.game.load.json('level3','app/game/levels/Level_3.json');\r\n         this.game.load.json('level4','app/game/levels/Level_4.json');\r\n         \r\n      }\r\n\r\n      create() {\r\n \r\n          \r\n         //var tween = this.add.tween(this.preloadBar).to({ alpha: 0 }, 1000, Phaser.Easing.Linear.None, true);\r\n        // tween.onComplete.add(this.startMainMenu, this);\r\n         this.game.state.start('GamePlay', true, false);\r\n      }\r\n\r\n   }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nimport GameObjects = GameApp.Models;\r\nimport Level = GameApp.Models.Level;\r\nimport Swap = GameObjects.Swap;\r\nimport IJsonLevel = GameApp.Models.IJsonLevel;\r\nimport Cookie = GameObjects.Cookie;\r\nimport GameConfig = GameApp.Models.Config;\r\n\r\nmodule GameApp.States {\r\n   'use strict';\r\n\r\n   export class GamePlay extends Phaser.State {\r\n\r\n      tileWidth: number = 64.0;\r\n      tileHeight: number = 72.0;\r\n\r\n      level: GameObjects.Level;\r\n\r\n      cookieLayer: Phaser.Group;\r\n      tilesLayer: Phaser.Group;\r\n\r\n      swipeFromColumn: number;\r\n      swipeFromRow: number;\r\n\r\n\r\n\r\n      private initLevel(levelName: string) {\r\n         var levelData: IJsonLevel = this.game.cache.getJSON(levelName);\r\n         this.level = new Level();\r\n         this.level.initWithLevel(levelData);\r\n         this.addTiles();\r\n      }\r\n\r\n      create() {\r\n\r\n         var bg = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY, 'bg');\r\n         bg.anchor.setTo(0.5, 0.5);\r\n\r\n         this.game.input.addMoveCallback(this.touchesMoved, this);\r\n\r\n         this.initLevel('level1');\r\n         this.beginGame();\r\n\r\n      }\r\n\r\n      beginGame() {\r\n         this.shuffle();\r\n      }\r\n\r\n      shuffle() {\r\n\r\n         var cookies: Cookie[] = this.level.shuffle();\r\n         this.addSpritesForCookies(cookies);\r\n      }\r\n\r\n      addSpritesForCookies(cookies: Cookie[]) {\r\n\r\n         this.cookieLayer = this.game.add.group();\r\n         this.cookieLayer.z = 2;\r\n\r\n         cookies.forEach((cookie: Cookie) => {\r\n            var point = this.pointForColum(cookie.column, cookie.row);\r\n            var createdCookie = this.cookieLayer.create(point.x, point.y, cookie.spriteName());\r\n            createdCookie.column = cookie.column;\r\n            createdCookie.row = cookie.row;\r\n            createdCookie.inputEnabled = true;\r\n            createdCookie.events.onInputDown.add(this.touchesBegan, this);\r\n            createdCookie.events.onInputUp.add(this.touchesEnd, this);\r\n            \r\n            cookie.sprite = createdCookie;\r\n         })\r\n      }\r\n\r\n      pointForColum(column: number, row: number): Phaser.Point {\r\n         return new Phaser.Point(column * this.tileWidth + this.tileWidth / 2, row * this.tileHeight + this.tileHeight / 2);\r\n      }\r\n\r\n      convertPoint(point: Phaser.Point, cookiePosition: GameObjects.ICookiePosition): boolean {\r\n\r\n         if (point.x >= 0 && point.x < GameConfig.numColumns * this.tileWidth &&\r\n            point.y >= 0 && point.y < GameConfig.numRows * this.tileHeight) {\r\n\r\n            cookiePosition.column = Math.floor(point.x / this.tileWidth);\r\n            cookiePosition.row = Math.floor(point.y / this.tileHeight);\r\n\r\n            return true;\r\n         }\r\n         else {\r\n            return false;\r\n         }\r\n\r\n      }\r\n\r\n      addTiles() {\r\n         this.tilesLayer = this.game.add.group();\r\n         this.tilesLayer.z = 1;\r\n\r\n         for (var row: number = 0; row < GameObjects.Config.numColumns; row++) {\r\n            for (var column: number = 0; column < GameObjects.Config.numColumns; column++) {\r\n               if (this.level.tileAtColumn(column, row) != null) {\r\n                  var point = this.pointForColum(column, row);\r\n                  this.tilesLayer.create(point.x, point.y, 'Tile');\r\n               }\r\n            }\r\n         }\r\n      }\r\n\r\n      touchesMoved(pointer, x, y, fromClick) {\r\n         \r\n         if(!this.swipeFromColumn) return;\r\n         \r\n         if (pointer.isDown) {\r\n\r\n            var cookiePosition: GameObjects.ICookiePosition = {\r\n               column: null,\r\n               row: null\r\n            }\r\n\r\n            if (this.convertPoint(new Phaser.Point(x, y), cookiePosition)) {\r\n\r\n               var horzDelta: number = 0,\r\n                  vertDelta: number = 0;\r\n\r\n               if (cookiePosition.column < this.swipeFromColumn) { // swipe left\r\n                  horzDelta = -1;\r\n               } else if (cookiePosition.column > this.swipeFromColumn) { // swipe right\r\n                  horzDelta = 1;\r\n               } else if (cookiePosition.row < this.swipeFromRow) { // swipe down\r\n                  vertDelta = -1;\r\n               } else if (cookiePosition.row > this.swipeFromRow) { // swipe up\r\n                  vertDelta = 1;\r\n               }\r\n\r\n               if (horzDelta != 0 || vertDelta != 0) {\r\n                  this.trySwapHorizontal(horzDelta, vertDelta);\r\n\r\n                  this.swipeFromColumn = null;\r\n               }\r\n\r\n            }\r\n\r\n         }\r\n\r\n      }\r\n\r\n      touchesBegan(selectedCookie, pointer) {\r\n\r\n         if (this.level.cookieAtColumn(selectedCookie.column, selectedCookie.row)) {\r\n            this.swipeFromColumn = selectedCookie.column;\r\n            this.swipeFromRow = selectedCookie.row;\r\n            //console.log('col data', this.columnForPoint(selectedCookie.position));\r\n            console.log('selectCookie col', selectedCookie.column);\r\n            console.log('selectCookie row', selectedCookie.row);\r\n         }\r\n         else{\r\n            this.swipeFromColumn = null;\r\n            this.swipeFromRow = null;\r\n         }\r\n\r\n      }\r\n\r\n      touchesEnd(selectedCookie) {\r\n         this.swipeFromColumn = this.swipeFromRow = null;\r\n         //console.log('releaseCookie', selectedCookie);\r\n         //console.log('up from', selectedGem);\r\n      }\r\n      \r\n      trySwapHorizontal(horzDelta: number, vertDelta: number){\r\n         var toColumn = this.swipeFromColumn + horzDelta;\r\n         var toRow = this.swipeFromRow + vertDelta;\r\n         \r\n         if (toColumn < 0 || toColumn >= GameConfig.numColumns) return;\r\n         if (toRow < 0 || toRow >= GameConfig.numRows) return;\r\n         \r\n         var toCookie: Cookie = this.level.cookieAtColumn(toColumn, toRow);\r\n         if(!toCookie) return;\r\n         \r\n         var fromCookie = this.level.cookieAtColumn(this.swipeFromColumn, this.swipeFromRow);\r\n         \r\n         var swap = new Swap();\r\n         swap.cookieA = fromCookie;\r\n         swap.cookieB = toCookie;\r\n         \r\n         this.level.performSwap(swap);\r\n         this.animateSwap(swap)\r\n         \r\n      }\r\n      \r\n      animateSwap(swap: Swap){\r\n         \r\n         var cookieSrpiteA = swap.cookieA.sprite,\r\n             cookieSrpiteB = swap.cookieB.sprite;\r\n         \r\n         this.game.add.tween(swap.cookieA.sprite).to({x: cookieSrpiteB.position.x, y: cookieSrpiteB.position.y}, 100, Phaser.Easing.Linear.None, true);\r\n         this.game.add.tween(swap.cookieB.sprite).to({x: cookieSrpiteA.position.x, y: cookieSrpiteA.position.y}, 100, Phaser.Easing.Linear.None, true);\r\n      }\r\n\r\n\r\n   }\r\n}","/// <reference path='../_references.ts' />\r\n\r\nmodule GameApp.States {\r\n\t'use strict'; \r\n\t\r\n   export class GameEnd extends Phaser.State {\r\n \r\n        create() {\r\n \r\n        }\r\n \r\n    }\r\n}","/// <reference path='_references.ts' />\r\n\r\nimport Boot = GameApp.States.Boot;\r\nimport Preloader = GameApp.States.Preloader;\r\nimport GamePlay = GameApp.States.GamePlay;\r\nimport GameEnd = GameApp.States.GamePlay;\r\n\r\nclass CandyGame {\r\n   constructor(scope, injector) {\r\n      this.game = new Phaser.Game(640, 1136, Phaser.AUTO, 'gameCanvas', {\r\n         create: this.create\r\n      });\r\n\r\n   }\r\n\r\n   game: Phaser.Game;\r\n\r\n   create() {\r\n      this.game.state.add(\"Boot\", Boot);\r\n      this.game.state.add(\"Preloader\", Preloader);\r\n      this.game.state.add(\"GamePlay\", GamePlay);\r\n      this.game.state.add(\"GameEnd\", GameEnd);\r\n      \r\n      this.game.state.start(\"Boot\");\r\n   }\r\n\r\n}\r\n","module GameApp{\r\n\t'use strict';\r\n\t\r\n\texport class GameHelpers{\r\n\t\tstatic getRandomNumber(maxNumber: number): number{\r\n\t\t\treturn Math.floor((Math.random() * maxNumber) + 1);\r\n\t\t}\r\n\t}\r\n\t\r\n}","/// <reference path='../../../../typings/angularjs/angular.d.ts' />\r\n/// <reference path='../../libs/phaser/typescript/phaser.d.ts' />\r\n\r\n/// <reference path='module.ts' />\r\n/// <reference path='index-controller.ts' />\r\n\r\n\r\n/// <reference path='models/tile.ts' />\r\n/// <reference path='models/cookie.ts' />\r\n/// <reference path='models/level.ts' />\r\n/// <reference path='models/swap.ts' />\r\n/// <reference path='models/config.ts' />\r\n\r\n/// <reference path='states/boot.ts' />\r\n/// <reference path='states/preloader.ts' />\r\n/// <reference path='states/game-play.ts' />\r\n/// <reference path='states/game-end.ts' />\r\n\r\n/// <reference path='main.ts' />\r\n\r\n\r\n\r\n/// <reference path='game-helpers.ts' />","/// <reference path='_references.ts' />\r\n\r\nmodule GameApp {\r\n\t'use strict';\r\n\r\n\t export function GameDirective($injector): angular.IDirective {\r\n\t\t\r\n\t\tvar linkFn = function(scope, ele, attrs) {\r\n\t\t\tnew CandyGame(scope, $injector);\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tscope: {},\r\n\t\t\ttemplate: '<div id=\"gameCanvas\"></div>',\r\n\t\t\tlink: linkFn\r\n\t\t}\r\n\t}\r\n\r\n\tGameDirective.$inject = ['$injector']\r\n\r\n\tangular.module('GameApp').directive('gameDirective',GameDirective)\r\n} "],"sourceRoot":"/source/"}